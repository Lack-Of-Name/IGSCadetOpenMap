=== Cadet Map App Plan ===

APP OVERVIEW
-------------
A mobile-friendly web app that:
- Loads a full-screen OpenStreetMap map
- Allows users to place start, end, and checkpoint markers
- Connects them directly or via routefinding (OSRM/OpenRouteService)
- Includes a compass that points to the selected checkpoint
- Shows smaller arrows for other checkpoints
- Optimized for web on mobile (optionally a PWA)

------------------------------------------------
TECH STACK
------------------------------------------------

FRONTEND:
- React (Vite or Next.js)
- Leaflet.js + React-Leaflet for maps
- Tailwind CSS for styling
- Zustand or Redux Toolkit for state
- DeviceOrientation API for compass

------------------------------------------------
FILE STRUCTURE
------------------------------------------------

/cadet-map
├── /frontend
│   ├── /src
│   │   ├── /components
│   │   │   ├── MapView.jsx
│   │   │   ├── Compass.jsx
│   │   │   ├── CheckpointList.jsx
│   │   │   └── LoginForm.jsx
│   │   ├── /pages
│   │   │   ├── Login.jsx
│   │   │   └── MapPage.jsx
│   │   ├── /hooks
│   │   │   ├── useCompass.js
│   │   │   └── useCheckpoints.js
│   │   ├── /utils
│   │   │   ├── api.js
│   │   │   └── routeUtils.js
│   │   ├── App.jsx
│   │   └── main.jsx
│   ├── /public
│   │   ├── index.html
│   │   └── favicon.ico
│   ├── package.json
│   └── tailwind.config.js
│
└── /server
    ├── server.js
    ├── /routes
    │   ├── auth.js
    │   └── route.js
    ├── users.json
    └── /data (optional for saved routes)

------------------------------------------------
TO-DO LIST
------------------------------------------------

PHASE 1: SETUP
---------------
[x] Initialize frontend with Vite + React
    $ npm create vite@latest cadet-map --template react
[x] Setup Tailwind CSS
[x] Install dependencies:
    $ npm install leaflet react-leaflet zustand
[x] Create backend folder and init Express
    $ npm init -y
    $ npm i express cors dotenv
[x] Implement basic /login route (POST, checks users.json)

PHASE 2: MAP PAGE
-----------------
[x] Integrate React-Leaflet
[x] Display full-screen OSM map
[x] Add buttons for start, checkpoint, end
[x] Add toggle: direct line vs. routefinding
[x] Display markers + lines between points

PHASE 3: COMPASS FEATURE
------------------------
[x] Use DeviceOrientationEvent (requires HTTPS)
[x] Get current heading + GPS position
[x] Calculate bearing to selected checkpoint
[x] Rotate compass arrow accordingly
[ ] Show small arrows toward other checkpoints

PHASE 4: AUTH & ROUTING
-----------------------
[x] Build /login page (username/password)
[x] Send POST request to backend
[x] Validate login and return session token (JWT or simple session)
[x] Save session client-side, redirect to map
[x] Add logout button

PHASE 5: FINISHING TOUCHES
--------------------------
[ ] Optimize UI for mobile
[ ] Calibrate compass and fallback when orientation unavailable
[ ] Save checkpoints to localStorage
[ ] Add loading/splash screen
[ ] Optionally add offline/PWA support
[ ] Add manifest.json + service worker for installable web app

------------------------------------------------
MAP ROUTING OPTIONS
------------------------------------------------
- OSRM API (http://project-osrm.org/docs)
- OpenRouteService API (https://openrouteservice.org/dev/#/api-docs)
Return GeoJSON → render via Leaflet <Polyline />

------------------------------------------------
BONUS FEATURES
------------------------------------------------
[ ] Dark mode for night navigation
[ ] Distance & ETA to next checkpoint
[ ] GPX export/import
[ ] Group/Team mode (shared routes)
